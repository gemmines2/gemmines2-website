<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gemmines2 Cart</title>
<style>
body { font-family: Arial, sans-serif; background-color: #0b0f25; color: #fff; margin:0; padding:0;}
.container { max-width: 900px; margin: 30px auto; padding: 20px; background-color: #1a1f40; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.5);}
h1 { text-align: center; margin-bottom: 20px; color: #00e0ff; }
.cart-item { display: flex; gap: 15px; margin-bottom: 20px; border-bottom: 1px solid #444; padding-bottom: 10px; align-items: center;}
.cart-item img { width: 120px; height: 120px; object-fit: cover; border-radius: 8px;}
.cart-item-details { flex: 1;}
.cart-item button { padding: 6px 12px; background-color: #ff4d4d; border:none; border-radius:6px; cursor:pointer; color:#fff;}
.cart-item button:hover { background-color: #cc0000;}
.quantity input { width: 50px; padding: 4px; border-radius:4px; border:none; text-align:center; background-color:#1a1f40; color:#fff; border:1px solid #555;}
#clear-cart { padding: 10px 20px; background-color:#0077ff; border:none; border-radius:6px; cursor:pointer; color:#fff; margin-bottom:20px;}
#clear-cart:hover { background-color:#005fcc;}
.cart-total { text-align:right; font-size:20px; margin-top:20px;}
.checkout-btn {
    display:inline-block;
    margin-top:20px;
    background:#00ffe0;
    color:#000;
    padding:12px 20px;
    border-radius:6px;
    font-weight:bold;
    text-decoration:none;
    float:right;
}
</style>
</head>
<body>

<div class="container">
  <h1>Your Cart</h1>
  <button id="clear-cart">Clear Cart</button>
  <div id="cart-items"></div>
  <div class="cart-total">Total: <span id="cart-total">$0.00</span></div>
  <a href="checkout.html" class="checkout-btn">Proceed to Checkout</a>
</div>

<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];

// Update cart icon count if exists
function updateCartCount() {
  const countEl = document.getElementById("cart-count");
  if (countEl) {
    countEl.textContent = cart.reduce((sum, item) => sum + item.qty, 0);
  }
}

// Render cart items
function renderCart() {
  const container = document.getElementById("cart-items");
  const totalEl = document.getElementById("cart-total");
  container.innerHTML = "";

  if (cart.length === 0) {
    totalEl.textContent = "$0.00";
    container.innerHTML = "<p>Your cart is empty.</p>";
    return;
  }

  let total = 0;
  cart.forEach(item => {
    const priceNum = parseFloat(item.price); // Convert "$150" â†’ 150
    total += priceNum * item.qty;

    container.innerHTML += `
      <div class="cart-item">
        <img src="${item.image}" alt="${item.name}">
        <div class="cart-item-details">
          <h4>${item.name}</h4>
          <p>${item.description}</p>
          <p>Price: $${priceNum.toFixed(2)}</p>
          <div class="quantity">Qty: <input type="number" min="1" value="${item.qty}" data-id="${item.id}"></div>
        </div>
        <button class="remove" data-id="${item.id}">Remove</button>
      </div>
    `;
  });

  totalEl.textContent = `$${total.toFixed(2)}`;
  localStorage.setItem("cart", JSON.stringify(cart));
  updateCartCount();
}

// Quantity change
document.addEventListener("input", e => {
  if (e.target.matches(".quantity input")) {
    const id = parseInt(e.target.dataset.id);
    const item = cart.find(i => i.id === id);
    if (item) {
      item.qty = parseInt(e.target.value) || 1;
      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    }
  }
});

// Remove item
document.addEventListener("click", e => {
  if (e.target.classList.contains("remove")) {
    const id = parseInt(e.target.dataset.id);
    cart = cart.filter(i => i.id !== id);
    localStorage.setItem("cart", JSON.stringify(cart));
    renderCart();
  }
});

// Clear cart
document.getElementById("clear-cart").addEventListener("click", () => {
  cart = [];
  localStorage.removeItem("cart");
  renderCart();
});

// Init
document.addEventListener("DOMContentLoaded", () => {
  renderCart();
  updateCartCount();
});
</script>

</body>
</html>
