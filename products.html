<script>
  document.addEventListener('DOMContentLoaded', () => {
    const productList = document.getElementById('product-list');
    if (!productList) return;

    productList.innerHTML = products.map(p => `
      <div class="product-card">
        <img src="${p.image}" alt="${p.name}">
        <h3>${p.name}</h3>
        <p>${p.description}</p>
        <div class="price">$${p.price.toFixed(2)}</div>
        <button class="buy-btn" onclick="addToCart('${p.id}')">Buy Now</button>
      </div>
    `).join("");

    if (typeof renderCartCount === 'function') renderCartCount();
  });

  // Simple cart function
  function addToCart(id) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const product = products.find(p => p.id === id);
    if (!product) return;

    const exists = cart.find(item => item.id === id);
    if (exists) {
      exists.qty += 1;
    } else {
      cart.push({...product, qty: 1});
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    alert(`${product.name} added to cart!`);
    if (typeof renderCartCount === 'function') renderCartCount();
  }
</script>
